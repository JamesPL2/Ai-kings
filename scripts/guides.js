// Language translations for guides page
const translations = {
    pl: {
        mainTitle: "Poradniki AI Tools",
        subtitle: "Interaktywne instrukcje obsługi z oznaczonymi elementami interfejsu",
        
        // Perplexity
        perplexitySubtitle: "Zaawansowana wyszukiwarka AI z aktualną wiedzą",
        perplexity1Title: "Pasek wyszukiwania",
        perplexity1Desc: "Główne pole do wprowadzania pytań. Wpisz pytanie w naturalnym języku - Perplexity rozumie złożone zapytania i kontekst.",
        perplexity2Title: "Menu boczne",
        perplexity2Desc: "Dostęp do historii wyszukiwań, ustawień konta i zaawansowanych opcji filtrowania źródeł.",
        perplexity3Title: "Opcje wyszukiwania",
        perplexity3Desc: "Przyciski do wyboru trybu wyszukiwania, w tym tryb Pro dla bardziej zaawansowanych analiz.",
        perplexityAccessTitle: "Wypróbuj Perplexity",
        perplexityAccessBtn: "Otwórz Perplexity",
        
        // Google AI Studio
        googleSubtitle: "Platforma prototypowania z modelami Gemini",
        google1Title: "Centrum promptów",
        google1Desc: "Główny obszar do tworzenia i testowania promptów. Wybierz typ: Text prompt, Chat lub Structured data.",
        google2Title: "Panel boczny",
        google2Desc: "Zarządzanie projektami, dostęp do historii, przykładowych promptów i dokumentacji API.",
        google3Title: "Ustawienia modelu",
        google3Desc: "Konfiguracja parametrów Gemini: Temperature, Safety settings, wybór wersji modelu (Pro, Flash, Ultra).",
        googleAccessTitle: "Rozpocznij z Google AI Studio",
        googleAccessBtn: "Otwórz Google AI Studio",
        
        // Genspark
        gensparkSubtitle: "Kompleksowa platforma AI dla biznesu",
        genspark1Title: "Super Agent Chat",
        genspark1Desc: "Główny interfejs konwersacyjny. Wpisz zapytanie aby otrzymać spersonalizowane odpowiedzi z różnych źródeł AI.",
        genspark2Title: "Pasek narzędzi AI",
        genspark2Desc: "Szybki dostęp do specjalistycznych narzędzi: analiza dokumentów, generowanie obrazów, kod, prezentacje i więcej.",
        genspark3Title: "Sparkpage Preview",
        genspark3Desc: "Podgląd generowanych spersonalizowanych stron z kompleksową analizą tematu, wykresami i danymi.",
        gensparkAccessTitle: "Odkryj możliwości Genspark",
        gensparkAccessBtn: "Otwórz Genspark"
    },
    en: {
        mainTitle: "AI Tools Guides",
        subtitle: "Interactive user guides with marked interface elements",
        
        // Perplexity
        perplexitySubtitle: "Advanced AI search engine with current knowledge",
        perplexity1Title: "Search Bar",
        perplexity1Desc: "Main field for entering questions. Type your question in natural language - Perplexity understands complex queries and context.",
        perplexity2Title: "Side Menu",
        perplexity2Desc: "Access to search history, account settings and advanced source filtering options.",
        perplexity3Title: "Search Options",
        perplexity3Desc: "Buttons to choose search mode, including Pro mode for more advanced analysis.",
        perplexityAccessTitle: "Try Perplexity",
        perplexityAccessBtn: "Open Perplexity",
        
        // Google AI Studio
        googleSubtitle: "Prototyping platform with Gemini models",
        google1Title: "Prompt Center",
        google1Desc: "Main area for creating and testing prompts. Choose type: Text prompt, Chat or Structured data.",
        google2Title: "Side Panel",
        google2Desc: "Project management, access to history, sample prompts and API documentation.",
        google3Title: "Model Settings",
        google3Desc: "Gemini parameter configuration: Temperature, Safety settings, model version selection (Pro, Flash, Ultra).",
        googleAccessTitle: "Get Started with Google AI Studio",
        googleAccessBtn: "Open Google AI Studio",
        
        // Genspark
        gensparkSubtitle: "Comprehensive AI platform for business",
        genspark1Title: "Super Agent Chat",
        genspark1Desc: "Main conversational interface. Type your query to receive personalized responses from various AI sources.",
        genspark2Title: "AI Tools Bar",
        genspark2Desc: "Quick access to specialized tools: document analysis, image generation, code, presentations and more.",
        genspark3Title: "Sparkpage Preview",
        genspark3Desc: "Preview of generated personalized pages with comprehensive topic analysis, charts and data.",
        gensparkAccessTitle: "Discover Genspark Capabilities",
        gensparkAccessBtn: "Open Genspark"
    },
    es: {
        mainTitle: "Guías de Herramientas AI",
        subtitle: "Instrucciones interactivas con elementos de interfaz marcados",
        
        // Perplexity
        perplexitySubtitle: "Motor de búsqueda AI avanzado con conocimiento actual",
        perplexity1Title: "Barra de Búsqueda",
        perplexity1Desc: "Campo principal para introducir preguntas. Escribe tu pregunta en lenguaje natural - Perplexity entiende consultas complejas y contexto.",
        perplexity2Title: "Menú Lateral",
        perplexity2Desc: "Acceso al historial de búsquedas, configuración de cuenta y opciones avanzadas de filtrado de fuentes.",
        perplexity3Title: "Opciones de Búsqueda",
        perplexity3Desc: "Botones para elegir el modo de búsqueda, incluyendo modo Pro para análisis más avanzados.",
        perplexityAccessTitle: "Prueba Perplexity",
        perplexityAccessBtn: "Abrir Perplexity",
        
        // Google AI Studio
        googleSubtitle: "Plataforma de prototipado con modelos Gemini",
        google1Title: "Centro de Prompts",
        google1Desc: "Área principal para crear y probar prompts. Elige tipo: Text prompt, Chat o Structured data.",
        google2Title: "Panel Lateral",
        google2Desc: "Gestión de proyectos, acceso a historial, prompts de ejemplo y documentación de API.",
        google3Title: "Configuración del Modelo",
        google3Desc: "Configuración de parámetros Gemini: Temperature, Safety settings, selección de versión del modelo (Pro, Flash, Ultra).",
        googleAccessTitle: "Comienza con Google AI Studio",
        googleAccessBtn: "Abrir Google AI Studio",
        
        // Genspark
        gensparkSubtitle: "Plataforma AI integral para negocios",
        genspark1Title: "Chat de Super Agente",
        genspark1Desc: "Interfaz conversacional principal. Escribe tu consulta para recibir respuestas personalizadas de varias fuentes AI.",
        genspark2Title: "Barra de Herramientas AI",
        genspark2Desc: "Acceso rápido a herramientas especializadas: análisis de documentos, generación de imágenes, código, presentaciones y más.",
        genspark3Title: "Vista Previa de Sparkpage",
        genspark3Desc: "Vista previa de páginas personalizadas generadas con análisis integral del tema, gráficos y datos.",
        gensparkAccessTitle: "Descubre las Capacidades de Genspark",
        gensparkAccessBtn: "Abrir Genspark"
    },
    hi: {
        mainTitle: "AI टूल्स गाइड",
        subtitle: "चिह्नित इंटरफेस तत्वों के साथ इंटरैक्टिव उपयोगकर्ता गाइड",
        
        // Perplexity
        perplexitySubtitle: "वर्तमान ज्ञान के साथ उन्नत AI सर्च इंजन",
        perplexity1Title: "खोज बार",
        perplexity1Desc: "प्रश्न दर्ज करने के लिए मुख्य क्षेत्र। प्राकृतिक भाषा में अपना प्रश्न टाइप करें - Perplexity जटिल प्रश्न और संदर्भ को समझता है।",
        perplexity2Title: "साइड मेनू",
        perplexity2Desc: "खोज इतिहास, खाता सेटिंग्स और उन्नत स्रोत फ़िल्टरिंग विकल्पों तक पहुंच।",
                perplexity3Title: "खोज विकल्प",
        perplexity3Desc: "खोज मोड चुनने के लिए बटन, अधिक उन्नत विश्लेषण के लिए Pro मोड सहित।",
        perplexityAccessTitle: "Perplexity आज़माएं",
        perplexityAccessBtn: "Perplexity खोलें",
        
        // Google AI Studio
        googleSubtitle: "Gemini मॉडल के साथ प्रोटोटाइपिंग प्लेटफॉर्म",
        google1Title: "प्रॉम्प्ट सेंटर",
        google1Desc: "प्रॉम्प्ट बनाने और परीक्षण के लिए मुख्य क्षेत्र। प्रकार चुनें: Text prompt, Chat या Structured data।",
        google2Title: "साइड पैनल",
        google2Desc: "प्रोजेक्ट प्रबंधन, इतिहास तक पहुंच, नमूना प्रॉम्प्ट और API दस्तावेज़।",
        google3Title: "मॉडल सेटिंग्स",
        google3Desc: "Gemini पैरामीटर कॉन्फ़िगरेशन: Temperature, Safety settings, मॉडल संस्करण चयन (Pro, Flash, Ultra)।",
        googleAccessTitle: "Google AI Studio के साथ शुरुआत करें",
        googleAccessBtn: "Google AI Studio खोलें",
        
        // Genspark
        gensparkSubtitle: "व्यापार के लिए व्यापक AI प्लेटफॉर्म",
        genspark1Title: "सुपर एजेंट चैट",
        genspark1Desc: "मुख्य संवादात्मक इंटरफेस। विभिन्न AI स्रोतों से व्यक्तिगत उत्तर प्राप्त करने के लिए अपना प्रश्न टाइप करें।",
        genspark2Title: "AI टूल्स बार",
        genspark2Desc: "विशेष उपकरणों तक त्वरित पहुंच: दस्तावेज़ विश्लेषण, छवि निर्माण, कोड, प्रस्तुतियाँ और अधिक।",
        genspark3Title: "Sparkpage पूर्वावलोकन",
        genspark3Desc: "व्यापक विषय विश्लेषण, चार्ट और डेटा के साथ उत्पन्न व्यक्तिगत पृष्ठों का पूर्वावलोकन।",
        gensparkAccessTitle: "Genspark की क्षमताओं की खोज करें",
        gensparkAccessBtn: "Genspark खोलें"
    },
    zh: {
        mainTitle: "AI工具指南",
        subtitle: "带有标记界面元素的交互式用户指南",
        
        // Perplexity
        perplexitySubtitle: "具有最新知识的高级AI搜索引擎",
        perplexity1Title: "搜索栏",
        perplexity1Desc: "输入问题的主要区域。用自然语言输入您的问题 - Perplexity理解复杂查询和上下文。",
        perplexity2Title: "侧边菜单",
        perplexity2Desc: "访问搜索历史、账户设置和高级源过滤选项。",
        perplexity3Title: "搜索选项",
        perplexity3Desc: "选择搜索模式的按钮，包括用于更高级分析的Pro模式。",
        perplexityAccessTitle: "试用Perplexity",
        perplexityAccessBtn: "打开Perplexity",
        
        // Google AI Studio
        googleSubtitle: "使用Gemini模型的原型平台",
        google1Title: "提示中心",
        google1Desc: "创建和测试提示的主要区域。选择类型：Text prompt、Chat或Structured data。",
        google2Title: "侧边面板",
        google2Desc: "项目管理，访问历史记录、示例提示和API文档。",
        google3Title: "模型设置",
        google3Desc: "Gemini参数配置：Temperature、Safety settings、模型版本选择（Pro、Flash、Ultra）。",
        googleAccessTitle: "开始使用Google AI Studio",
        googleAccessBtn: "打开Google AI Studio",
        
        // Genspark
        gensparkSubtitle: "面向企业的综合AI平台",
        genspark1Title: "超级代理聊天",
        genspark1Desc: "主要对话界面。输入您的查询以从各种AI源接收个性化响应。",
        genspark2Title: "AI工具栏",
        genspark2Desc: "快速访问专业工具：文档分析、图像生成、代码、演示文稿等。",
        genspark3Title: "Sparkpage预览",
        genspark3Desc: "生成的个性化页面预览，包含全面的主题分析、图表和数据。",
        gensparkAccessTitle: "发现Genspark的功能",
        gensparkAccessBtn: "打开Genspark"
    }
};

// Language names in their native scripts
const languageNames = {
    pl: "Polski",
    en: "English",
    es: "Español",
    hi: "हिन्दी",
    zh: "中文"
};

document.addEventListener('DOMContentLoaded', function() {
    let currentLanguage = 'pl'; 

    // Load saved language preference
    const savedLanguage = localStorage.getItem('aiToolsLanguage');
    if (savedLanguage && translations[savedLanguage]) {
        currentLanguage = savedLanguage;
    }
    updateContent(currentLanguage); // Zaktualizuj treść na starcie

    // Language dropdown functionality
    const languageBtn = document.getElementById('languageBtn');
    const languageMenu = document.getElementById('languageMenu');

    languageBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        languageMenu.classList.toggle('active');
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', function(e) {
        if (!languageBtn.contains(e.target) && !languageMenu.contains(e.target)) {
            languageMenu.classList.remove('active');
        }
    });

    // Language option selection
    const languageOptions = document.querySelectorAll('.language-option');
    languageOptions.forEach(option => {
        option.addEventListener('click', function() {
            const selectedLang = this.getAttribute('data-lang');
            if (selectedLang !== currentLanguage) {
                currentLanguage = selectedLang;
                updateContent(currentLanguage);
                localStorage.setItem('aiToolsLanguage', currentLanguage);
            }
            languageMenu.classList.remove('active');
        });
    });

    // Hotspot interactions
    const hotspots = document.querySelectorAll('.hotspot');
    hotspots.forEach(hotspot => {
        hotspot.addEventListener('click', function() {
            const explanationNumber = this.getAttribute('data-explanation');
            highlightExplanation(explanationNumber);
        });

        hotspot.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                this.click();
            }
        });

        hotspot.addEventListener('mouseenter', function() {
            const explanationNumber = this.getAttribute('data-explanation');
            highlightExplanation(explanationNumber);
        });
    });

    // Auto-highlight first explanation for each section
    setTimeout(() => {
        const firstHotspots = document.querySelectorAll('.hotspot[data-explanation="1"], .hotspot[data-explanation="4"], .hotspot[data-explanation="7"]');
        firstHotspots.forEach(hotspot => {
            hotspot.classList.add('active');
        });
        highlightExplanation('1');
    }, 1000);
});

// Highlight explanation and corresponding hotspot
function highlightExplanation(number) {
    // Remove all active states
    document.querySelectorAll('.hotspot').forEach(h => h.classList.remove('active'));
    document.querySelectorAll('.explanation-item').forEach(e => e.classList.remove('active'));

    // Add active state to selected elements
    const activeHotspot = document.querySelector(`[data-explanation="${number}"]`);
    const activeExplanation = document.querySelector(`[data-number="${number}"]`);

    if (activeHotspot) activeHotspot.classList.add('active');
    if (activeExplanation) {
        activeExplanation.classList.add('active');
        activeExplanation.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }
}

// Update content based on selected language
function updateContent(currentLanguage) {
    const trans = translations[currentLanguage];
    const currentLanguageSpan = document.getElementById('currentLanguage');
    
    // Update language display
    if (currentLanguageSpan) {
        currentLanguageSpan.textContent = languageNames[currentLanguage];
    }
    
    // Update all content elements
    Object.keys(trans).forEach(key => {
        const element = document.getElementById(key);
        if (element) {
            element.textContent = trans[key];
        }
    });
    
    // Update HTML lang attribute
    document.documentElement.lang = currentLanguage;
}

// ESC key to close language menu
document.addEventListener('keydown', function(e) {
    const languageMenu = document.getElementById('languageMenu');
    if (e.key === 'Escape' && languageMenu && languageMenu.classList.contains('active')) {
        languageMenu.classList.remove('active');
    }
});